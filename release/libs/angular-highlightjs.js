!function(e,n){"object"==typeof exports||"object"==typeof module&&module.exports?module.exports=n(require("angular"),require("highlight.js")):"function"==typeof define&&define.amd?define(["angular","hljs"],n):e.returnExports=n(e.angular,e.hljs)}(this,function(e,n){function t(n){return function(t){switch(t){case"escape":return e.isDefined(n.hljsEscape)?n.hljsEscape:n.escape;case"no-escape":return e.isDefined(n.hljsNoEscape)?n.hljsNoEscape:n.noEscape;case"onhighlight":return e.isDefined(n.hljsOnhighlight)?n.hljsOnhighlight:n.onhighlight}}}function i(n){var t=!0;return e.forEach(["source","include"],function(e){n[e]&&(t=!1)}),t}var r=e.module("hljs",[]);r.provider("hljsService",function(){var t={};return{setOptions:function(n){e.extend(t,n)},getOptions:function(){return e.copy(t)},$get:function(){return(n.configure||e.noop)(t),n}}}),r.factory("hljsCache",["$cacheFactory",function(e){return e("hljsCache")}]),r.controller("HljsCtrl",["hljsCache","hljsService","$interpolate","$window",function(n,t,i,r){function c(e,n,t){var i;return function(){var c=this,l=arguments,o=function(){i=null,t||e.apply(c,l)},u=t&&!i;r.clearTimeout(i),i=r.setTimeout(o,n),u&&e.apply(c,l)}}function l(e,n){var t=n?"\\\\$&":"\\$&";return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,t)}function o(e){for(var n,t=[],i=new RegExp(j,"g"),r="",c=0;null!==(n=i.exec(e));)r+=e.substring(c,n.index)+v,c=n.index+n[0].length,t.push(n[0]);return r+=e.substr(c),{code:r,tokens:t}}function u(e,n){for(var t,i=new RegExp(v,"g"),r="",c=0;null!==(t=i.exec(e));)r+=e.substring(c,t.index)+n.shift(),c=t.index+t[0].length;return r+=e.substr(c)}var h=this,s=null,a=null,f=null,g=!1,p=null,d=null,j=l(i.startSymbol())+"((.|\\s)+?)"+l(i.endSymbol()),v="âˆ«";h.init=function(e){s=e},h.setInterpolateScope=function(e){g=e,f&&h.highlight(f)},h.setLanguage=function(e){a=e,f&&h.highlight(f)},h.highlightCallback=function(e){d=e},h._highlight=function(r){if(s){var c,l,j;if(f=r,g&&(j=o(r),r=j.code),a?(l=h._cacheKey(a,!!g,r),c=n.get(l),c||(c=t.highlight(a,t.fixMarkup(r),!0),n.put(l,c))):(l=h._cacheKey(!!g,r),c=n.get(l),c||(c=t.highlightAuto(t.fixMarkup(r)),n.put(l,c))),r=c.value,g){(p||e.noop)(),j&&(r=u(r,j.tokens));var v=i(r);p=g.$watch(v,function(e,n){e!==n&&s.html(e)}),g.$apply(),s.html(v(g))}else s.html(r);s.addClass(c.language),null!==d&&e.isFunction(d)&&d()}},h.highlight=c(h._highlight,17),h.clear=function(){s&&(f=null,s.text(""))},h.release=function(){s=null,g=null,(p||e.noop)(),p=null},h._cacheKey=function(){var e=Array.prototype.slice.call(arguments),n="!angular-highlightjs!";return e.join(n)}}]);var c,l,o,u,h;return c=["$parse",function(n){return{restrict:"EA",controller:"HljsCtrl",compile:function(r,c,l){var o=r[0].innerHTML.replace(/^(\r\n|\r|\n)/m,""),u=r[0].textContent.replace(/^(\r\n|\r|\n)/m,"");return r.html('<pre><code class="hljs"></code></pre>'),function(r,c,l,h){var s,a=t(l);if(e.isDefined(a("escape"))?s=n(a("escape")):e.isDefined(a("no-escape"))&&(s=n("false")),h.init(c.find("code")),a("onhighlight")&&h.highlightCallback(function(){r.$eval(a("onhighlight"))}),(o||u)&&i(l)){var f;f=s&&!s(r)?u:o,h.highlight(f)}r.$on("$destroy",function(){h.release()})}}}}],o=function(n){return function(){return{require:"?hljs",restrict:"A",link:function(t,i,r,c){c&&r.$observe(n,function(n){e.isDefined(n)&&c.setLanguage(n)})}}}},l=function(e){return function(){return{require:"?hljs",restrict:"A",link:function(n,t,i,r){r&&n.$watch(i[e],function(e,t){(e||e!==t)&&r.setInterpolateScope(e?n:null)})}}}},u=function(e){return function(){return{require:"?hljs",restrict:"A",link:function(n,t,i,r){r&&n.$watch(i[e],function(e,n){e?r.highlight(e):r.clear()})}}}},h=function(n){return["$http","$templateCache","$q",function(t,i,r){return{require:"?hljs",restrict:"A",compile:function(c,l,o){var u=l[n];return function(n,c,l,o){var h=0;o&&n.$watch(u,function(n){var c=++h;if(n&&e.isString(n)){var l,u;l=i.get(n),l||(u=r.defer(),t.get(n,{cache:i,transformResponse:function(e,n){return e}}).success(function(e){c===h&&u.resolve(e)}).error(function(){c===h&&o.clear(),u.resolve()}),l=u.promise),r.when(l).then(function(n){n&&(e.isArray(n)?n=n[1]:e.isObject(n)&&(n=n.data),n=n.replace(/^(\r\n|\r|\n)/m,""),o.highlight(n))})}else o.clear()})}}}}]},function(n){n.directive("hljs",c),e.forEach(["interpolate","hljsInterpolate","compile","hljsCompile"],function(e){n.directive(e,l(e))}),e.forEach(["language","hljsLanguage"],function(e){n.directive(e,o(e))}),e.forEach(["source","hljsSource"],function(e){n.directive(e,u(e))}),e.forEach(["include","hljsInclude"],function(e){n.directive(e,h(e))})}(r),"hljs"});